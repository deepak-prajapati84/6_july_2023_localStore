<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Local Stores</title>
        <link rel="stylesheet" href="./css/style.css" />
    </head>
    <body>
        <form action="" id="form">
            <label for="name">Name</label>
            <input type="text" name="name" id="name" class="form"  />
            <label for="email">Email</label>
            <input type="email" name="email" id="email" class="form"  />
            <label for="phone">phone</label>
            <input type="number" name="phone" id="phone" class="form"  />
            <button type='submit'>save</button>
        </form>
        <!-- <div class="box">
            <span>&times;</span>
            <h5>Name</h5>
            <div>abc</div>

            <h5>email</h5>
            <div>e3da</div>

            <h5>phone</h5>
            <div>493887</div>
        </div> -->


        <script>
            /*
                let user=[
                    {
                        name:"deepak",
                        email:"deepak@gmail.com"
                    },
                    {
                        'name':"Pradeep",
                        'email':"pradeep@gmail.com"
                    }
                ]
                localStorage.setItem("name",JSON.stringify(user));
                console.log(JSON.parse(localStorage.getItem("name")));
            */

            let form=document.querySelector('form');
            let main=document.querySelector('.box');
            //console.log(form);
            form.addEventListener("submit",(e)=>{
                let name=e.target.name.value;
                let email=e.target.email.value;
                let phone=e.target.phone.value;
                console.log(name,email,phone);
                let user=JSON.parse(localStorage.getItem("userDitails")) ?? [];
                user.push(
                    {
                        "name":name,
                        "email":email,
                        "phone":phone
                    }
                );

                //console.log("user--------->",user);

                localStorage.setItem("userDitails",JSON.stringify(user));
                displayData();

                e.preventDefault();
            })

            let displayData=()=>{
                let userdata=JSON.parse(localStorage.getItem("userDitails")) ?? [];
                let finalData='';
                userdata.forEach((element,i) => {
                    //console.log(element);
                    finalData+=           
                                `<div class="box">
                                    <span>&times;</span>
                                    <h5>Name</h5>
                                    <div>${element.name}</div>

                                    <h5>email</h5>
                                    <div>${element.email}</div>

                                    <h5>phone</h5>
                                    <div>${element.phone}</div>
                                </div>`
                });
                main.innerHTML=finalData;
                //console.log("finalData---------->",finalData);
            }
            displayData();
        </script>
    </body>
</html>